{"remainingRequest":"C:\\Users\\a5768\\Documents\\new_im\\im-system-fronted-new\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\a5768\\Documents\\new_im\\im-system-fronted-new\\src\\views\\Articles.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\a5768\\Documents\\new_im\\im-system-fronted-new\\src\\views\\Articles.vue","mtime":1594794950447},{"path":"C:\\Users\\a5768\\Documents\\new_im\\im-system-fronted-new\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\a5768\\Documents\\new_im\\im-system-fronted-new\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\a5768\\Documents\\new_im\\im-system-fronted-new\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\a5768\\Documents\\new_im\\im-system-fronted-new\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBtYXBTdGF0ZSwgbWFwQWN0aW9ucyB9IGZyb20gInZ1ZXgiDQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgZGF0YTogKCkgPT4gKHsNCiAgICAvLyDmr4/poIHmnIDlpKfpoa/npLogMTAg5YiXDQogICAgbWF4Vmlld1BhZ2U6IDEwLA0KDQogICAgLy8g55W25YmN6aCB5pW4DQogICAgY3VyclBhZ2U6IDEsDQoNCiAgICAvLyDpgY7mv77lkI3nqLENCiAgICBmaWx0ZXJfbmFtZTogJycNCiAgfSksDQogIGNvbXB1dGVkOiB7DQogICAgLy8gc3RvcmUgc3RhdGU6IGFydGljbGVzDQogICAgLi4ubWFwU3RhdGUoImFydGljbGVzIiwgWw0KICAgICAgIml0ZW1zIiwNCiAgICAgICJpc0l0ZW1zTG9hZGluZyIsDQogICAgICAiaXNJdGVtc0xvYWRlZCINCiAgICBdKSwNCg0KICAgIHBhZ2VTdGFydDogZnVuY3Rpb24oKXsNCiAgICAgIHJldHVybiAodGhpcy5jdXJyUGFnZSAtIDEpICogdGhpcy5tYXhWaWV3UGFnZTsNCiAgICB9LA0KDQogICAgLy8g57i96aCB5pW4IOmZpOS7pSDmr4/poIHpoa/npLrmnIDlpKflub7liJcNCiAgICB0b3RhbFBhZ2U6IGZ1bmN0aW9uKCl7DQogICAgICAvLyDmiJHlgJHpnIDopoHlvoznq6/lm57lgrPmlofnq6DmlbgNCiAgICAgIC8vcmV0dXJuIE1hdGguY2VpbCh0aGlzLmZpbHRlcmVkUm93cy5sZW5ndGggLyB0aGlzLm1heFZpZXdQYWdlKTsNCiAgICAgIC8vIOebruWJjeioreWumiAxMDAg5YiX6LOH5paZDQogICAgICByZXR1cm4gTWF0aC5jZWlsKDEwMCAvIHRoaXMubWF4Vmlld1BhZ2UpOw0KICAgIH0sDQoNCiAgICBmaWx0ZXJlZFJvd3M6IGZ1bmN0aW9uKCl7DQogICAgICAvLyDlm6DngrogSmF2YVNjcmlwdCDnmoQgZmlsdGVyIOacieWIhuWkp+Wwj+Wvq++8jA0KICAgICAgLy8g5omA5Lul6YCZ6KOh5bCHIGZpbHRlcl9uYW1lIOiIhyByb3dzW25dLm5hbWUg6YCa6YCa6L2J5bCP5a+r5pa55L6/5q+U5bCN44CCDQogICAgICBsZXQgZmlsdGVyX25hbWUgPSB0aGlzLmZpbHRlcl9uYW1lLnRvTG93ZXJDYXNlKCk7DQoNCiAgICAgIC8vIOWmguaenCBmaWx0ZXJfbmFtZSDmnInlhaflrrnvvIzlm57lgrPpgY7mv77lvoznmoTos4fmlpnvvIzlkKbliYflsIfljp/mnKznmoQgcm93cyDlm57lgrPjgIINCiAgICAgIHJldHVybiAoIHRoaXMuZmlsdGVyX25hbWUudHJpbSgpICE9PSAnJyApID8NCiAgICAgICAgdGhpcy5pdGVtcy5maWx0ZXIoZnVuY3Rpb24oZGF0YSl7DQogICAgICAgICAgaWYoZGF0YS5wb3N0ZXJfbmFtZSAhPT0gbnVsbCl7DQogICAgICAgICAgICByZXR1cm4gZGF0YS5wb3N0ZXJfbmFtZS50b0xvd2VyQ2FzZSgpLmluZGV4T2YoZmlsdGVyX25hbWUpID4gLTE7DQogICAgICAgICAgfQ0KICAgICAgICB9KSA6DQogICAgICB0aGlzLml0ZW1zOw0KICAgIH0sDQogIH0sDQogIHdhdGNoOiB7DQogICAgLy8g5aaC5p6cIGN1cnJQYWdlIOWAvOacieiuig0KICAgIGN1cnJQYWdlKHBhZ2UpIHsNCiAgICAgIHRoaXMubG9hZEl0ZW1zQnlQYWdlKHBhZ2UpDQogICAgICBjb25zb2xlLmxvZygnd2F0Y2g6ICcgKyBwYWdlKQ0KICAgICAgY29uc29sZS5sb2codGhpcy5pdGVtcykNCiAgICB9DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICAvLyBzdG9yZSBhY3Rpb25zOiBhcnRpY2xlcw0KICAgIC4uLm1hcEFjdGlvbnMoImFydGljbGVzIiwgWyJsb2FkSXRlbXMiXSksDQoNCiAgICAvLyDovInlhaUgaXRlbXMg6KuL5rGCDQogICAgbG9hZEl0ZW1zQnlQYWdlKHZpZXdQYWdlKSB7DQogICAgICB0aGlzLmxvYWRJdGVtcyh7IHBhZ2U6IHZpZXdQYWdlIH0pDQogICAgfSwNCg0KICAgIC8vIOioreWumiBwYWdlDQogICAgc2V0UGFnZTogZnVuY3Rpb24ocGFnZSkgew0KICAgICAgY29uc29sZS5sb2coJ3NldHBhZ2U6ICcgKyBwYWdlKQ0KICAgICAgLy8gcGFnZSDlgLzkuI3og73lsI/mlrwgMCDkuI3og73lpKfmlrznuL3poIHmlbgNCiAgICAgIGlmKCBwYWdlIDw9IDAgfHwgcGFnZSA+IHRoaXMudG90YWxQYWdlICl7DQogICAgICAgIGNvbnNvbGUubG9nKCdyZXR1cm4nKQ0KICAgICAgICByZXR1cm47DQogICAgICB9DQogICAgICB0aGlzLmN1cnJQYWdlID0gcGFnZTsNCiAgICB9DQogIH0sDQogIGFzeW5jIG1vdW50ZWQoKSB7DQogICAgLy8gaW5pdCBsb2FkIGl0ZW1zDQogICAgdGhpcy5sb2FkSXRlbXNCeVBhZ2UodGhpcy5jdXJyUGFnZSkNCg0KICAgIC8vIHJvdXRlcjogL2FydGljbGVzLzpwYWdlDQogICAgLy8g6Kit5a6a55W25YmNIHBhZ2UgDQogICAgLy90aGlzLmN1cnJQYWdlID0gdGhpcy4kcm91dGUucGFyYW1zLnBhZ2UNCiAgICAvL2lmICghdGhpcy5pc0l0ZW1zTG9hZGVkKSB7DQogICAgLy8gIGxldCB2aWV3UGFnZSA9IHRoaXMuJHJvdXRlLnBhcmFtcy5wYWdlDQogICAgLy8NCiAgICAvLyAgdGhpcy5sb2FkSXRlbXNCeVBhZ2Uodmlld1BhZ2UpDQogICAgLy99DQogIH0NCn0NCg=="},{"version":3,"sources":["Articles.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsCA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Articles.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <div class=\"container\">\r\n\r\n    <!-- loading -->\r\n    <template v-if=\"isItemsLoading\">\r\n      取得 iM 文章列表中...\r\n    </template>\r\n\r\n    <!-- loaded -->\r\n    <template v-else>\r\n\r\n      <div class=\"d-flex\">\r\n        <button @click.prevent=\"setPage(currPage - 1)\">上一頁</button>\r\n        <button class=\"ml-auto\" @click.prevent=\"setPage(currPage + 1)\">下一頁</button>\r\n      </div>\r\n\r\n      <input v-model=\"filter_name\" type=\"text\" />\r\n\r\n      <!-- articles -->\r\n      <pre style=\"white-space: pre-wrap\">\r\n        <div v-for=\"(item, index) in filteredRows.slice(pageStart, pageStart + maxViewPage)\" style=\"margin-top: 1em;\" :key=\"index\">\r\n            <div class=\"title\" v-text=\"item\">\r\n            </div>\r\n        </div>\r\n      </pre>\r\n\r\n      <!-- pagination -->\r\n      <div class=\"d-flex\">\r\n        <button @click.prevent=\"setPage(currPage - 1)\">上一頁</button>\r\n        <button class=\"ml-auto\" @click.prevent=\"setPage(currPage + 1)\">下一頁</button>\r\n      </div>\r\n  \r\n    </template>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapState, mapActions } from \"vuex\"\r\n\r\nexport default {\r\n  data: () => ({\r\n    // 每頁最大顯示 10 列\r\n    maxViewPage: 10,\r\n\r\n    // 當前頁數\r\n    currPage: 1,\r\n\r\n    // 過濾名稱\r\n    filter_name: ''\r\n  }),\r\n  computed: {\r\n    // store state: articles\r\n    ...mapState(\"articles\", [\r\n      \"items\",\r\n      \"isItemsLoading\",\r\n      \"isItemsLoaded\"\r\n    ]),\r\n\r\n    pageStart: function(){\r\n      return (this.currPage - 1) * this.maxViewPage;\r\n    },\r\n\r\n    // 總頁數 除以 每頁顯示最大幾列\r\n    totalPage: function(){\r\n      // 我們需要後端回傳文章數\r\n      //return Math.ceil(this.filteredRows.length / this.maxViewPage);\r\n      // 目前設定 100 列資料\r\n      return Math.ceil(100 / this.maxViewPage);\r\n    },\r\n\r\n    filteredRows: function(){\r\n      // 因為 JavaScript 的 filter 有分大小寫，\r\n      // 所以這裡將 filter_name 與 rows[n].name 通通轉小寫方便比對。\r\n      let filter_name = this.filter_name.toLowerCase();\r\n\r\n      // 如果 filter_name 有內容，回傳過濾後的資料，否則將原本的 rows 回傳。\r\n      return ( this.filter_name.trim() !== '' ) ?\r\n        this.items.filter(function(data){\r\n          if(data.poster_name !== null){\r\n            return data.poster_name.toLowerCase().indexOf(filter_name) > -1;\r\n          }\r\n        }) :\r\n      this.items;\r\n    },\r\n  },\r\n  watch: {\r\n    // 如果 currPage 值有變\r\n    currPage(page) {\r\n      this.loadItemsByPage(page)\r\n      console.log('watch: ' + page)\r\n      console.log(this.items)\r\n    }\r\n  },\r\n  methods: {\r\n    // store actions: articles\r\n    ...mapActions(\"articles\", [\"loadItems\"]),\r\n\r\n    // 載入 items 請求\r\n    loadItemsByPage(viewPage) {\r\n      this.loadItems({ page: viewPage })\r\n    },\r\n\r\n    // 設定 page\r\n    setPage: function(page) {\r\n      console.log('setpage: ' + page)\r\n      // page 值不能小於 0 不能大於總頁數\r\n      if( page <= 0 || page > this.totalPage ){\r\n        console.log('return')\r\n        return;\r\n      }\r\n      this.currPage = page;\r\n    }\r\n  },\r\n  async mounted() {\r\n    // init load items\r\n    this.loadItemsByPage(this.currPage)\r\n\r\n    // router: /articles/:page\r\n    // 設定當前 page \r\n    //this.currPage = this.$route.params.page\r\n    //if (!this.isItemsLoaded) {\r\n    //  let viewPage = this.$route.params.page\r\n    //\r\n    //  this.loadItemsByPage(viewPage)\r\n    //}\r\n  }\r\n}\r\n</script>\r\n"]}]}