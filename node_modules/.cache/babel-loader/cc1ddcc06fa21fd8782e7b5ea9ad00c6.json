{"remainingRequest":"C:\\Users\\a5768\\Documents\\new_im\\im-system-fronted-new\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\a5768\\Documents\\new_im\\im-system-fronted-new\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\a5768\\Documents\\new_im\\im-system-fronted-new\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\a5768\\Documents\\new_im\\im-system-fronted-new\\src\\views\\Articles.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\a5768\\Documents\\new_im\\im-system-fronted-new\\src\\views\\Articles.vue","mtime":1594794950447},{"path":"C:\\Users\\a5768\\Documents\\new_im\\im-system-fronted-new\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\a5768\\Documents\\new_im\\im-system-fronted-new\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\a5768\\Documents\\new_im\\im-system-fronted-new\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\a5768\\Documents\\new_im\\im-system-fronted-new\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5kZXgtb2YiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcudHJpbSI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6L1VzZXJzL2E1NzY4L0RvY3VtZW50cy9uZXdfaW0vaW0tc3lzdGVtLWZyb250ZWQtbmV3L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiQzovVXNlcnMvYTU3NjgvRG9jdW1lbnRzL25ld19pbS9pbS1zeXN0ZW0tZnJvbnRlZC1uZXcvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgeyBtYXBTdGF0ZSwgbWFwQWN0aW9ucyB9IGZyb20gInZ1ZXgiOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIC8vIOavj+mggeacgOWkp+mhr+ekuiAxMCDliJcKICAgICAgbWF4Vmlld1BhZ2U6IDEwLAogICAgICAvLyDnlbbliY3poIHmlbgKICAgICAgY3VyclBhZ2U6IDEsCiAgICAgIC8vIOmBjua/vuWQjeeosQogICAgICBmaWx0ZXJfbmFtZTogJycKICAgIH07CiAgfSwKICBjb21wdXRlZDogX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBtYXBTdGF0ZSgiYXJ0aWNsZXMiLCBbIml0ZW1zIiwgImlzSXRlbXNMb2FkaW5nIiwgImlzSXRlbXNMb2FkZWQiXSkpLCB7fSwgewogICAgcGFnZVN0YXJ0OiBmdW5jdGlvbiBwYWdlU3RhcnQoKSB7CiAgICAgIHJldHVybiAodGhpcy5jdXJyUGFnZSAtIDEpICogdGhpcy5tYXhWaWV3UGFnZTsKICAgIH0sCiAgICAvLyDnuL3poIHmlbgg6Zmk5LulIOavj+mggemhr+ekuuacgOWkp+W5vuWIlwogICAgdG90YWxQYWdlOiBmdW5jdGlvbiB0b3RhbFBhZ2UoKSB7CiAgICAgIC8vIOaIkeWAkemcgOimgeW+jOerr+WbnuWCs+aWh+eroOaVuAogICAgICAvL3JldHVybiBNYXRoLmNlaWwodGhpcy5maWx0ZXJlZFJvd3MubGVuZ3RoIC8gdGhpcy5tYXhWaWV3UGFnZSk7CiAgICAgIC8vIOebruWJjeioreWumiAxMDAg5YiX6LOH5paZCiAgICAgIHJldHVybiBNYXRoLmNlaWwoMTAwIC8gdGhpcy5tYXhWaWV3UGFnZSk7CiAgICB9LAogICAgZmlsdGVyZWRSb3dzOiBmdW5jdGlvbiBmaWx0ZXJlZFJvd3MoKSB7CiAgICAgIC8vIOWboOeCuiBKYXZhU2NyaXB0IOeahCBmaWx0ZXIg5pyJ5YiG5aSn5bCP5a+r77yMCiAgICAgIC8vIOaJgOS7pemAmeijoeWwhyBmaWx0ZXJfbmFtZSDoiIcgcm93c1tuXS5uYW1lIOmAmumAmui9ieWwj+Wvq+aWueS+v+avlOWwjeOAggogICAgICB2YXIgZmlsdGVyX25hbWUgPSB0aGlzLmZpbHRlcl9uYW1lLnRvTG93ZXJDYXNlKCk7IC8vIOWmguaenCBmaWx0ZXJfbmFtZSDmnInlhaflrrnvvIzlm57lgrPpgY7mv77lvoznmoTos4fmlpnvvIzlkKbliYflsIfljp/mnKznmoQgcm93cyDlm57lgrPjgIIKCiAgICAgIHJldHVybiB0aGlzLmZpbHRlcl9uYW1lLnRyaW0oKSAhPT0gJycgPyB0aGlzLml0ZW1zLmZpbHRlcihmdW5jdGlvbiAoZGF0YSkgewogICAgICAgIGlmIChkYXRhLnBvc3Rlcl9uYW1lICE9PSBudWxsKSB7CiAgICAgICAgICByZXR1cm4gZGF0YS5wb3N0ZXJfbmFtZS50b0xvd2VyQ2FzZSgpLmluZGV4T2YoZmlsdGVyX25hbWUpID4gLTE7CiAgICAgICAgfQogICAgICB9KSA6IHRoaXMuaXRlbXM7CiAgICB9CiAgfSksCiAgd2F0Y2g6IHsKICAgIC8vIOWmguaenCBjdXJyUGFnZSDlgLzmnInorooKICAgIGN1cnJQYWdlOiBmdW5jdGlvbiBjdXJyUGFnZShwYWdlKSB7CiAgICAgIHRoaXMubG9hZEl0ZW1zQnlQYWdlKHBhZ2UpOwogICAgICBjb25zb2xlLmxvZygnd2F0Y2g6ICcgKyBwYWdlKTsKICAgICAgY29uc29sZS5sb2codGhpcy5pdGVtcyk7CiAgICB9CiAgfSwKICBtZXRob2RzOiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIG1hcEFjdGlvbnMoImFydGljbGVzIiwgWyJsb2FkSXRlbXMiXSkpLCB7fSwgewogICAgLy8g6LyJ5YWlIGl0ZW1zIOiri+axggogICAgbG9hZEl0ZW1zQnlQYWdlOiBmdW5jdGlvbiBsb2FkSXRlbXNCeVBhZ2Uodmlld1BhZ2UpIHsKICAgICAgdGhpcy5sb2FkSXRlbXMoewogICAgICAgIHBhZ2U6IHZpZXdQYWdlCiAgICAgIH0pOwogICAgfSwKICAgIC8vIOioreWumiBwYWdlCiAgICBzZXRQYWdlOiBmdW5jdGlvbiBzZXRQYWdlKHBhZ2UpIHsKICAgICAgY29uc29sZS5sb2coJ3NldHBhZ2U6ICcgKyBwYWdlKTsgLy8gcGFnZSDlgLzkuI3og73lsI/mlrwgMCDkuI3og73lpKfmlrznuL3poIHmlbgKCiAgICAgIGlmIChwYWdlIDw9IDAgfHwgcGFnZSA+IHRoaXMudG90YWxQYWdlKSB7CiAgICAgICAgY29uc29sZS5sb2coJ3JldHVybicpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdGhpcy5jdXJyUGFnZSA9IHBhZ2U7CiAgICB9CiAgfSksCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIC8vIGluaXQgbG9hZCBpdGVtcwogICAgICAgICAgICAgIF90aGlzLmxvYWRJdGVtc0J5UGFnZShfdGhpcy5jdXJyUGFnZSk7IC8vIHJvdXRlcjogL2FydGljbGVzLzpwYWdlCiAgICAgICAgICAgICAgLy8g6Kit5a6a55W25YmNIHBhZ2UgCiAgICAgICAgICAgICAgLy90aGlzLmN1cnJQYWdlID0gdGhpcy4kcm91dGUucGFyYW1zLnBhZ2UKICAgICAgICAgICAgICAvL2lmICghdGhpcy5pc0l0ZW1zTG9hZGVkKSB7CiAgICAgICAgICAgICAgLy8gIGxldCB2aWV3UGFnZSA9IHRoaXMuJHJvdXRlLnBhcmFtcy5wYWdlCiAgICAgICAgICAgICAgLy8KICAgICAgICAgICAgICAvLyAgdGhpcy5sb2FkSXRlbXNCeVBhZ2Uodmlld1BhZ2UpCiAgICAgICAgICAgICAgLy99CgoKICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlKTsKICAgIH0pKSgpOwogIH0KfTs="},{"version":3,"sources":["Articles.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsCA,SAAA,QAAA,EAAA,UAAA,QAAA,MAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA;AAAA,WAAA;AACA;AACA,MAAA,WAAA,EAAA,EAFA;AAIA;AACA,MAAA,QAAA,EAAA,CALA;AAOA;AACA,MAAA,WAAA,EAAA;AARA,KAAA;AAAA,GADA;AAWA,EAAA,QAAA,kCAEA,QAAA,CAAA,UAAA,EAAA,CACA,OADA,EAEA,gBAFA,EAGA,eAHA,CAAA,CAFA;AAQA,IAAA,SAAA,EAAA,qBAAA;AACA,aAAA,CAAA,KAAA,QAAA,GAAA,CAAA,IAAA,KAAA,WAAA;AACA,KAVA;AAYA;AACA,IAAA,SAAA,EAAA,qBAAA;AACA;AACA;AACA;AACA,aAAA,IAAA,CAAA,IAAA,CAAA,MAAA,KAAA,WAAA,CAAA;AACA,KAlBA;AAoBA,IAAA,YAAA,EAAA,wBAAA;AACA;AACA;AACA,UAAA,WAAA,GAAA,KAAA,WAAA,CAAA,WAAA,EAAA,CAHA,CAKA;;AACA,aAAA,KAAA,WAAA,CAAA,IAAA,OAAA,EAAA,GACA,KAAA,KAAA,CAAA,MAAA,CAAA,UAAA,IAAA,EAAA;AACA,YAAA,IAAA,CAAA,WAAA,KAAA,IAAA,EAAA;AACA,iBAAA,IAAA,CAAA,WAAA,CAAA,WAAA,GAAA,OAAA,CAAA,WAAA,IAAA,CAAA,CAAA;AACA;AACA,OAJA,CADA,GAMA,KAAA,KANA;AAOA;AAjCA,IAXA;AA8CA,EAAA,KAAA,EAAA;AACA;AACA,IAAA,QAFA,oBAEA,IAFA,EAEA;AACA,WAAA,eAAA,CAAA,IAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,YAAA,IAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,KAAA,KAAA;AACA;AANA,GA9CA;AAsDA,EAAA,OAAA,kCAEA,UAAA,CAAA,UAAA,EAAA,CAAA,WAAA,CAAA,CAFA;AAIA;AACA,IAAA,eALA,2BAKA,QALA,EAKA;AACA,WAAA,SAAA,CAAA;AAAA,QAAA,IAAA,EAAA;AAAA,OAAA;AACA,KAPA;AASA;AACA,IAAA,OAAA,EAAA,iBAAA,IAAA,EAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,cAAA,IAAA,EADA,CAEA;;AACA,UAAA,IAAA,IAAA,CAAA,IAAA,IAAA,GAAA,KAAA,SAAA,EAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,QAAA;AACA;AACA;;AACA,WAAA,QAAA,GAAA,IAAA;AACA;AAlBA,IAtDA;AA0EA,EAAA,OA1EA,qBA0EA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA,cAAA,KAAA,CAAA,eAAA,CAAA,KAAA,CAAA,QAAA,EAFA,CAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAXA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAYA;AAtFA,CAAA","sourcesContent":["<template>\r\n  <div class=\"container\">\r\n\r\n    <!-- loading -->\r\n    <template v-if=\"isItemsLoading\">\r\n      取得 iM 文章列表中...\r\n    </template>\r\n\r\n    <!-- loaded -->\r\n    <template v-else>\r\n\r\n      <div class=\"d-flex\">\r\n        <button @click.prevent=\"setPage(currPage - 1)\">上一頁</button>\r\n        <button class=\"ml-auto\" @click.prevent=\"setPage(currPage + 1)\">下一頁</button>\r\n      </div>\r\n\r\n      <input v-model=\"filter_name\" type=\"text\" />\r\n\r\n      <!-- articles -->\r\n      <pre style=\"white-space: pre-wrap\">\r\n        <div v-for=\"(item, index) in filteredRows.slice(pageStart, pageStart + maxViewPage)\" style=\"margin-top: 1em;\" :key=\"index\">\r\n            <div class=\"title\" v-text=\"item\">\r\n            </div>\r\n        </div>\r\n      </pre>\r\n\r\n      <!-- pagination -->\r\n      <div class=\"d-flex\">\r\n        <button @click.prevent=\"setPage(currPage - 1)\">上一頁</button>\r\n        <button class=\"ml-auto\" @click.prevent=\"setPage(currPage + 1)\">下一頁</button>\r\n      </div>\r\n  \r\n    </template>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapState, mapActions } from \"vuex\"\r\n\r\nexport default {\r\n  data: () => ({\r\n    // 每頁最大顯示 10 列\r\n    maxViewPage: 10,\r\n\r\n    // 當前頁數\r\n    currPage: 1,\r\n\r\n    // 過濾名稱\r\n    filter_name: ''\r\n  }),\r\n  computed: {\r\n    // store state: articles\r\n    ...mapState(\"articles\", [\r\n      \"items\",\r\n      \"isItemsLoading\",\r\n      \"isItemsLoaded\"\r\n    ]),\r\n\r\n    pageStart: function(){\r\n      return (this.currPage - 1) * this.maxViewPage;\r\n    },\r\n\r\n    // 總頁數 除以 每頁顯示最大幾列\r\n    totalPage: function(){\r\n      // 我們需要後端回傳文章數\r\n      //return Math.ceil(this.filteredRows.length / this.maxViewPage);\r\n      // 目前設定 100 列資料\r\n      return Math.ceil(100 / this.maxViewPage);\r\n    },\r\n\r\n    filteredRows: function(){\r\n      // 因為 JavaScript 的 filter 有分大小寫，\r\n      // 所以這裡將 filter_name 與 rows[n].name 通通轉小寫方便比對。\r\n      let filter_name = this.filter_name.toLowerCase();\r\n\r\n      // 如果 filter_name 有內容，回傳過濾後的資料，否則將原本的 rows 回傳。\r\n      return ( this.filter_name.trim() !== '' ) ?\r\n        this.items.filter(function(data){\r\n          if(data.poster_name !== null){\r\n            return data.poster_name.toLowerCase().indexOf(filter_name) > -1;\r\n          }\r\n        }) :\r\n      this.items;\r\n    },\r\n  },\r\n  watch: {\r\n    // 如果 currPage 值有變\r\n    currPage(page) {\r\n      this.loadItemsByPage(page)\r\n      console.log('watch: ' + page)\r\n      console.log(this.items)\r\n    }\r\n  },\r\n  methods: {\r\n    // store actions: articles\r\n    ...mapActions(\"articles\", [\"loadItems\"]),\r\n\r\n    // 載入 items 請求\r\n    loadItemsByPage(viewPage) {\r\n      this.loadItems({ page: viewPage })\r\n    },\r\n\r\n    // 設定 page\r\n    setPage: function(page) {\r\n      console.log('setpage: ' + page)\r\n      // page 值不能小於 0 不能大於總頁數\r\n      if( page <= 0 || page > this.totalPage ){\r\n        console.log('return')\r\n        return;\r\n      }\r\n      this.currPage = page;\r\n    }\r\n  },\r\n  async mounted() {\r\n    // init load items\r\n    this.loadItemsByPage(this.currPage)\r\n\r\n    // router: /articles/:page\r\n    // 設定當前 page \r\n    //this.currPage = this.$route.params.page\r\n    //if (!this.isItemsLoaded) {\r\n    //  let viewPage = this.$route.params.page\r\n    //\r\n    //  this.loadItemsByPage(viewPage)\r\n    //}\r\n  }\r\n}\r\n</script>\r\n"],"sourceRoot":"src/views"}]}