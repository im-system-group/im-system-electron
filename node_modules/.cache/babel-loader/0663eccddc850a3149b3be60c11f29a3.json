{"remainingRequest":"C:\\Users\\a5768\\Documents\\new_im\\im-system-fronted-new\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\a5768\\Documents\\new_im\\im-system-fronted-new\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\a5768\\Documents\\new_im\\im-system-fronted-new\\src\\store\\modules\\articles.js","dependencies":[{"path":"C:\\Users\\a5768\\Documents\\new_im\\im-system-fronted-new\\src\\store\\modules\\articles.js","mtime":1594789368411},{"path":"C:\\Users\\a5768\\Documents\\new_im\\im-system-fronted-new\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\a5768\\Documents\\new_im\\im-system-fronted-new\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\a5768\\Documents\\new_im\\im-system-fronted-new\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc29tZSI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6L1VzZXJzL2E1NzY4L0RvY3VtZW50cy9uZXdfaW0vaW0tc3lzdGVtLWZyb250ZWQtbmV3L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0IHsgYXBpUmVxdWVzdCB9IGZyb20gJy4uLy4uL3V0aWxzJzsKCnZhciBzdGF0ZSA9IGZ1bmN0aW9uIHN0YXRlKCkgewogIHJldHVybiB7CiAgICBsb2FkZWRQYWdlc0NvdW50OiAwLAogICAgaXRlbXM6IFtdLAogICAgaXNJdGVtc0xvYWRpbmc6IHRydWUsCiAgICBpc0l0ZW1zTG9hZGVkOiBmYWxzZQogIH07Cn07Cgp2YXIgZ2V0dGVycyA9IHt9Owp2YXIgYWN0aW9ucyA9IHsKICBsb2FkSXRlbXM6IGZ1bmN0aW9uIGxvYWRJdGVtcyhfcmVmLCBfcmVmMikgewogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgdmFyIHN0YXRlLCBjb21taXQsIHBhZ2UsIHJlc3BvbnNlLCBpdGVtczsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIHN0YXRlID0gX3JlZi5zdGF0ZSwgY29tbWl0ID0gX3JlZi5jb21taXQ7CiAgICAgICAgICAgICAgcGFnZSA9IF9yZWYyLnBhZ2U7CgogICAgICAgICAgICAgIGlmICghKHN0YXRlLmxvYWRlZFBhZ2VzQ291bnQgPiBwYWdlKSkgewogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSA0OwogICAgICAgICAgICAgIGNvbW1pdCgnc2V0JywgewogICAgICAgICAgICAgICAgaXNJdGVtc0xvYWRpbmc6IHRydWUsCiAgICAgICAgICAgICAgICBpc0l0ZW1zTG9hZGVkOiBmYWxzZQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA4OwogICAgICAgICAgICAgIHJldHVybiBhcGlSZXF1ZXN0LmdldCgiL2FjY2Vzcy1hcnRpY2xlcy1hcGkucGhwP3BhZ2U9Ii5jb25jYXQocGFnZSkpOwoKICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICBpdGVtcyA9IHJlc3BvbnNlLmRhdGEucmVzdWx0czsKICAgICAgICAgICAgICBjb21taXQoJ3B1c2hJdGVtcycsIHsKICAgICAgICAgICAgICAgIGl0ZW1zOiBpdGVtcwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIGNvbW1pdCgnc2V0JywgewogICAgICAgICAgICAgICAgaXNJdGVtc0xvYWRpbmc6IGZhbHNlLAogICAgICAgICAgICAgICAgaXNJdGVtc0xvYWRlZDogdHJ1ZQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNzsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDE0OwogICAgICAgICAgICAgIF9jb250ZXh0LnQwID0gX2NvbnRleHRbImNhdGNoIl0oNCk7CiAgICAgICAgICAgICAgY29uc29sZS5sb2coX2NvbnRleHQudDApOwoKICAgICAgICAgICAgY2FzZSAxNzoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZSwgbnVsbCwgW1s0LCAxNF1dKTsKICAgIH0pKSgpOwogIH0KfTsKdmFyIG11dGF0aW9ucyA9IHsKICBzZXQ6IGZ1bmN0aW9uIHNldChzdGF0ZSwgcGFydGlhbFN0YXRlKSB7CiAgICBPYmplY3QuYXNzaWduKHN0YXRlLCBwYXJ0aWFsU3RhdGUpOwogIH0sCiAgcHVzaEl0ZW1zOiBmdW5jdGlvbiBwdXNoSXRlbXMoc3RhdGUsIF9yZWYzKSB7CiAgICB2YXIgaXRlbXMgPSBfcmVmMy5pdGVtczsKCiAgICAvKiog6YGO5r++5bey5a2Y5Zyo55qE5paH56ugICovCiAgICB2YXIgbm90RXhpc3RJdGVtcyA9IGl0ZW1zLmZpbHRlcihmdW5jdGlvbiAoX3JlZjQpIHsKICAgICAgdmFyIGlkID0gX3JlZjQuaWQ7CiAgICAgIHJldHVybiAhc3RhdGUuaXRlbXMuc29tZShmdW5jdGlvbiAoZGF0YSkgewogICAgICAgIHJldHVybiBkYXRhLmlkID09PSBpZDsKICAgICAgfSk7CiAgICB9KTsKICAgIHN0YXRlLml0ZW1zID0gc3RhdGUuaXRlbXMuY29uY2F0KG5vdEV4aXN0SXRlbXMucmV2ZXJzZSgpKTsKICAgIHN0YXRlLmxvYWRlZFBhZ2VzQ291bnQrKzsKICB9Cn07CnZhciBhcnRpY2xlcyA9IHsKICBuYW1lc3BhY2VkOiB0cnVlLAogIHN0YXRlOiBzdGF0ZSwKICBnZXR0ZXJzOiBnZXR0ZXJzLAogIGFjdGlvbnM6IGFjdGlvbnMsCiAgbXV0YXRpb25zOiBtdXRhdGlvbnMKfTsKZXhwb3J0IGRlZmF1bHQgYXJ0aWNsZXM7"},{"version":3,"sources":["C:/Users/a5768/Documents/new_im/im-system-fronted-new/src/store/modules/articles.js"],"names":["apiRequest","state","loadedPagesCount","items","isItemsLoading","isItemsLoaded","getters","actions","loadItems","commit","page","get","response","data","results","console","log","mutations","set","partialState","Object","assign","pushItems","notExistItems","filter","id","some","concat","reverse","articles","namespaced"],"mappings":";;;;;AAAA,SAASA,UAAT,QAA2B,aAA3B;;AAEA,IAAMC,KAAK,GAAG,SAARA,KAAQ;AAAA,SAAO;AACjBC,IAAAA,gBAAgB,EAAE,CADD;AAEjBC,IAAAA,KAAK,EAAE,EAFU;AAGjBC,IAAAA,cAAc,EAAE,IAHC;AAIjBC,IAAAA,aAAa,EAAE;AAJE,GAAP;AAAA,CAAd;;AAOA,IAAMC,OAAO,GAAG,EAAhB;AAIA,IAAMC,OAAO,GAAG;AACNC,EAAAA,SADM,kCACiC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA3BP,cAAAA,KAA2B,QAA3BA,KAA2B,EAApBQ,MAAoB,QAApBA,MAAoB;AAARC,cAAAA,IAAQ,SAARA,IAAQ;;AAAA,oBACrCT,KAAK,CAACC,gBAAN,GAAyBQ,IADY;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA;AAMrCD,cAAAA,MAAM,CAAC,KAAD,EAAQ;AAAEL,gBAAAA,cAAc,EAAE,IAAlB;AAAwBC,gBAAAA,aAAa,EAAE;AAAvC,eAAR,CAAN;AANqC;AAAA,qBAOdL,UAAU,CAACW,GAAX,yCAAgDD,IAAhD,EAPc;;AAAA;AAO/BE,cAAAA,QAP+B;AAQ/BT,cAAAA,KAR+B,GAQvBS,QAAQ,CAACC,IAAT,CAAcC,OARS;AASrCL,cAAAA,MAAM,CAAC,WAAD,EAAc;AAAEN,gBAAAA,KAAK,EAALA;AAAF,eAAd,CAAN;AACAM,cAAAA,MAAM,CAAC,KAAD,EAAQ;AAAEL,gBAAAA,cAAc,EAAE,KAAlB;AAAyBC,gBAAAA,aAAa,EAAE;AAAxC,eAAR,CAAN;AAVqC;AAAA;;AAAA;AAAA;AAAA;AAarCU,cAAAA,OAAO,CAACC,GAAR;;AAbqC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAe5C;AAhBW,CAAhB;AAmBA,IAAMC,SAAS,GAAG;AACdC,EAAAA,GADc,eACVjB,KADU,EACHkB,YADG,EACW;AACrBC,IAAAA,MAAM,CAACC,MAAP,CAAcpB,KAAd,EAAqBkB,YAArB;AACH,GAHa;AAIdG,EAAAA,SAJc,qBAIJrB,KAJI,SAIc;AAAA,QAATE,KAAS,SAATA,KAAS;;AACxB;AACA,QAAMoB,aAAa,GAAGpB,KAAK,CAACqB,MAAN,CAClB;AAAA,UAAGC,EAAH,SAAGA,EAAH;AAAA,aAAY,CAACxB,KAAK,CAACE,KAAN,CAAYuB,IAAZ,CAAiB,UAAAb,IAAI;AAAA,eAAIA,IAAI,CAACY,EAAL,KAAYA,EAAhB;AAAA,OAArB,CAAb;AAAA,KADkB,CAAtB;AAIAxB,IAAAA,KAAK,CAACE,KAAN,GAAcF,KAAK,CAACE,KAAN,CAAYwB,MAAZ,CAAmBJ,aAAa,CAACK,OAAd,EAAnB,CAAd;AACA3B,IAAAA,KAAK,CAACC,gBAAN;AACH;AAZa,CAAlB;AAeA,IAAM2B,QAAQ,GAAG;AACbC,EAAAA,UAAU,EAAE,IADC;AAEb7B,EAAAA,KAAK,EAALA,KAFa;AAGbK,EAAAA,OAAO,EAAPA,OAHa;AAIbC,EAAAA,OAAO,EAAPA,OAJa;AAKbU,EAAAA,SAAS,EAATA;AALa,CAAjB;AAQA,eAAeY,QAAf","sourcesContent":["import { apiRequest } from '../../utils'\r\n\r\nconst state = () => ({\r\n    loadedPagesCount: 0,\r\n    items: [],\r\n    isItemsLoading: true,\r\n    isItemsLoaded: false,\r\n})\r\n\r\nconst getters = {\r\n\r\n}\r\n\r\nconst actions = {\r\n    async loadItems({ state, commit }, { page }) {\r\n        if (state.loadedPagesCount > page) {\r\n            return\r\n        }\r\n\r\n        try {\r\n            commit('set', { isItemsLoading: true, isItemsLoaded: false })\r\n            const response = await apiRequest.get(`/access-articles-api.php?page=${page}`)\r\n            const items = response.data.results\r\n            commit('pushItems', { items })\r\n            commit('set', { isItemsLoading: false, isItemsLoaded: true })\r\n        }\r\n        catch (err) {\r\n            console.log(err)\r\n        }\r\n    },\r\n}\r\n\r\nconst mutations = {\r\n    set(state, partialState) {\r\n        Object.assign(state, partialState);\r\n    },\r\n    pushItems(state, { items }) {\r\n        /** 過濾已存在的文章 */\r\n        const notExistItems = items.filter(\r\n            ({ id }) => !state.items.some(data => data.id === id)\r\n        )\r\n\r\n        state.items = state.items.concat(notExistItems.reverse())\r\n        state.loadedPagesCount++\r\n    },\r\n}\r\n\r\nconst articles = {\r\n    namespaced: true,\r\n    state,\r\n    getters,\r\n    actions,\r\n    mutations\r\n}\r\n\r\nexport default articles\r\n"]}]}